<?php declare(strict_types=1);

namespace Mammatus\Http\Server\Generated;

/**
 * This class is generated by mammatus/http-server, do not edit manually.
 * Or do, I'm not your parent, they will be overwritten next composer install/update ¯\_(ツ)_/¯.
 */
abstract class AbstractHelm
{
    /** @return iterable<string, \Mammatus\Http\Server\Kubernetes\Helm\Vhost> */
    final public function vhosts(): iterable
    {
        {% for vhost in vhosts -%}
        yield '{{ vhost.vhost.name }}' => new \Mammatus\Http\Server\Kubernetes\Helm\Vhost(
            /** @phpstan-ignore-next-line */
            new \Mammatus\Groups\Attributes\Group(\Mammatus\Groups\Type::from('{{ vhost.vhost.group.type.value }}'), '{{ vhost.vhost.group.name }}'),
            [
                [
                    'helper' => 'mammatus.container.port',
                    'type' => 'container',
                    'arguments' => [
                        'name' => '{{ vhost.vhost.name }}',
                        'containerPort' => {{ vhost.vhost.port }},
                    ],
                ],
                {% if vhost.probes is not empty %}
                [
                    'helper' => 'mammatus.container.probe',
                    'type' => 'container',
                    'arguments' => [
                    {% for type, handler in vhost.probes -%}
                        '{{ type }}' => [
                            'path' => '{{ handler.route.path }}',
                            'vhost' => '{{ vhost.vhost.name }}',
                        ],
                    {% endfor -%}
                    ],
                ],
            {% endif -%}
            ],
        );
        {% endfor -%}
    }
}
